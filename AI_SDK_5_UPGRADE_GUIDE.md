# AI SDK 5 Beta å‡çº§æŒ‡å—

## ğŸš§ å½“å‰çŠ¶æ€

æˆ‘ä»¬å·²ç»å¼€å§‹å‡çº§åˆ° [AI SDK 5 Beta](https://ai-sdk.dev/docs/announcing-ai-sdk-5-beta)ï¼Œä½†é‡åˆ°äº†ä¸€äº›æŒ‘æˆ˜ï¼Œå› ä¸º Beta ç‰ˆæœ¬çš„ API ä»åœ¨å˜åŒ–ä¸­ã€‚

## âœ… å·²å®Œæˆçš„å‡çº§

### 1. åŒ…å®‰è£…
å·²å®‰è£… AI SDK 5 Beta ç‰ˆæœ¬ï¼š
```bash
npm install ai@beta @ai-sdk/openai@beta @ai-sdk/anthropic@beta @ai-sdk/google@beta @ai-sdk/groq@beta @ai-sdk/deepseek@beta @ai-sdk/mistral@beta @ai-sdk/xai@beta @ai-sdk/react@beta
```

### 2. API Route å‡çº§ âœ…
`app/api/chat+api.ts` å·²æˆåŠŸå‡çº§åˆ° AI SDK 5ï¼š

```typescript
import { streamText, convertToModelMessages, UIMessage } from 'ai';

export async function POST(req: Request) {
  const { messages, config }: { messages: UIMessage[], config: AIConfig } = await req.json();

  const result = streamText({
    model,
    messages: convertToModelMessages(messages), // Convert UIMessages to ModelMessages
    temperature: 0.7,
  });

  // Use new UI message stream response for AI SDK 5 with SSE protocol
  return result.toUIMessageStreamResponse();
}
```

**ä¸»è¦å˜åŒ–ï¼š**
- ä½¿ç”¨ `UIMessage` ç±»å‹
- ä½¿ç”¨ `convertToModelMessages()` è½¬æ¢æ¶ˆæ¯
- ä½¿ç”¨ `toUIMessageStreamResponse()` æ›¿ä»£ `toDataStreamResponse()`
- ç§»é™¤äº† `maxTokens` å‚æ•°ï¼ˆåœ¨ AI SDK 5 ä¸­å¯èƒ½æ”¹åæˆ–ç§»é™¤ï¼‰

## ğŸš§ è¿›è¡Œä¸­çš„å‡çº§

### 3. å®¢æˆ·ç«¯å‡çº§ (éƒ¨åˆ†å®Œæˆ)
`components/browser/AIChatWithAPIRoute.tsx` çš„å‡çº§é‡åˆ°æŒ‘æˆ˜ï¼š

**é—®é¢˜ï¼š**
1. `DefaultChatTransport` å¯èƒ½ä¸æ˜¯æ­£ç¡®çš„å¯¼å…¥
2. `useChat` è¿”å›çš„å±æ€§åç§°å¯èƒ½å·²æ”¹å˜
3. Beta API ä»åœ¨å˜åŒ–ä¸­

**å½“å‰æ–¹æ³•ï¼š**
- ä¿æŒç°æœ‰çš„å·¥ä½œç‰ˆæœ¬
- ç­‰å¾… AI SDK 5 stable å‘å¸ƒ
- é€æ­¥æµ‹è¯•å’Œè°ƒæ•´

## ğŸ¯ AI SDK 5 çš„ä¸»è¦æ”¹è¿›

æ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼ŒAI SDK 5 å¸¦æ¥äº†ä»¥ä¸‹é‡å¤§æ”¹è¿›ï¼š

### 1. LanguageModelV2 æ¶æ„
- å†…å®¹ä¼˜å…ˆè®¾è®¡
- æ”¹è¿›çš„ç±»å‹å®‰å…¨
- æ›´å¥½çš„æ‰©å±•æ€§

### 2. æ¶ˆæ¯é‡æ„
- **UIMessage**: ç”¨äº UI æ˜¾ç¤ºçš„å®Œæ•´æ¶ˆæ¯
- **ModelMessage**: å‘é€ç»™æ¨¡å‹çš„ä¼˜åŒ–æ¶ˆæ¯
- ç±»å‹å®‰å…¨çš„å·¥å…·è°ƒç”¨

### 3. Server-Sent Events (SSE)
- æ ‡å‡†åŒ–çš„æµåè®®
- æ›´å¥½çš„æµè§ˆå™¨å…¼å®¹æ€§
- æ›´å®¹æ˜“è°ƒè¯•

### 4. æ–°çš„ useChat æ¶æ„
- Transport ç³»ç»Ÿé…ç½®
- å¢å¼ºçš„çŠ¶æ€ç®¡ç†
- æ›´å¥½çš„ç±»å‹å®‰å…¨

### 5. Agentic æ§åˆ¶
- `prepareStep` å‡½æ•°
- `stopWhen` å‚æ•°
- å¤šæ­¥éª¤ä»£ç†æ”¯æŒ

## ğŸ“ è¿ç§»ç­–ç•¥

### çŸ­æœŸç­–ç•¥ï¼ˆå½“å‰ï¼‰
1. âœ… **API Route ä¼˜å…ˆ**: æœåŠ¡ç«¯å·²å‡çº§åˆ° AI SDK 5
2. ğŸ”„ **å®¢æˆ·ç«¯è§‚æœ›**: ç­‰å¾… Beta API ç¨³å®š
3. ğŸ“š **æ–‡æ¡£è·Ÿè¸ª**: æŒç»­å…³æ³¨å®˜æ–¹æ›´æ–°

### ä¸­æœŸç­–ç•¥ï¼ˆBeta ç¨³å®šåï¼‰
1. æ›´æ–°å®¢æˆ·ç«¯ä½¿ç”¨æ–°çš„ transport ç³»ç»Ÿ
2. å®ç° UIMessage/ModelMessage åˆ†ç¦»
3. åˆ©ç”¨ç±»å‹å®‰å…¨çš„å·¥å…·è°ƒç”¨

### é•¿æœŸç­–ç•¥ï¼ˆStable å‘å¸ƒåï¼‰
1. å®Œå…¨è¿ç§»åˆ° AI SDK 5
2. åˆ©ç”¨æ–°çš„ agentic æ§åˆ¶åŠŸèƒ½
3. ä¼˜åŒ–æµå¼å“åº”ä½“éªŒ

## ğŸ› ï¸ å½“å‰å·¥ä½œæ–¹æ¡ˆ

ç”±äºå®¢æˆ·ç«¯å‡çº§çš„å¤æ‚æ€§ï¼Œæˆ‘ä»¬é‡‡ç”¨æ··åˆæ–¹æ¡ˆï¼š

1. **API Route**: ä½¿ç”¨ AI SDK 5 Beta (âœ… å·¥ä½œæ­£å¸¸)
2. **å®¢æˆ·ç«¯**: ç»§ç»­ä½¿ç”¨ AI SDK 4 æ¨¡å¼
3. **å…¼å®¹æ€§**: ç¡®ä¿æ–°æ—§ç³»ç»Ÿéƒ½èƒ½å·¥ä½œ

è¿™æ ·ç¡®ä¿äº†ï¼š
- æœåŠ¡ç«¯äº«å— AI SDK 5 çš„æ–°ç‰¹æ€§
- å®¢æˆ·ç«¯ä¿æŒç¨³å®šæ€§
- é€æ­¥è¿ç§»ï¼Œé™ä½é£é™©

## ğŸ” ç›‘æ§å’Œä¸‹ä¸€æ­¥

### ç›‘æ§äº‹é¡¹
- [ ] AI SDK 5 Beta æ›´æ–°
- [ ] å®˜æ–¹è¿ç§»æŒ‡å—
- [ ] ç¤¾åŒºæœ€ä½³å®è·µ
- [ ] æ€§èƒ½å¯¹æ¯”æµ‹è¯•

### ä¸‹ä¸€æ­¥è¡ŒåŠ¨
1. æµ‹è¯•å½“å‰æ··åˆå®ç°
2. ç­‰å¾… AI SDK 5 API ç¨³å®š
3. å‚è€ƒå®˜æ–¹ç¤ºä¾‹è¿›è¡Œå®¢æˆ·ç«¯å‡çº§
4. é€æ­¥å¯ç”¨æ–°åŠŸèƒ½

## ğŸ“Š å‡çº§ä¼˜åŠ¿

å³ä½¿æ˜¯éƒ¨åˆ†å‡çº§ï¼Œæˆ‘ä»¬ä¹Ÿè·å¾—äº†ï¼š

âœ… **æœåŠ¡ç«¯æ”¹è¿›**:
- Server-Sent Events åè®®
- æ›´å¥½çš„æ¶ˆæ¯ç±»å‹ç³»ç»Ÿ
- æ”¹è¿›çš„é”™è¯¯å¤„ç†

âœ… **æ¶æ„å‡†å¤‡**:
- ä¸ºå®Œå…¨è¿ç§»æ‰“å¥½åŸºç¡€
- ä¿æŒä»£ç å¤ç”¨
- é™ä½æœªæ¥è¿ç§»æˆæœ¬

## ğŸ¯ ç»“è®º

AI SDK 5 Beta å¸¦æ¥äº†é‡å¤§æ”¹è¿›ï¼Œä½†ç”±äº API ä»åœ¨å˜åŒ–ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†ç¨³å¥çš„åˆ†æ­¥éª¤å‡çº§ç­–ç•¥ã€‚å½“å‰çš„æ··åˆå®ç°æ—¢åˆ©ç”¨äº†æ–°ç‰¹æ€§ï¼Œåˆä¿æŒäº†ç³»ç»Ÿç¨³å®šæ€§ã€‚

å½“ AI SDK 5 stable å‘å¸ƒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿå®Œæˆå‰©ä½™çš„å®¢æˆ·ç«¯å‡çº§ã€‚